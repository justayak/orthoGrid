<!DOCTYPE html>
<html>
<head>
    <title>OrthoGrid</title>
</head>
<script src="libs/smila_minified.js"></script>
<script src="orthoGrid.js"></script>
<body>
<div>ORTHO_GRID</div>

<div style="width:800px;height:600px;" id="smila">

</div>
</body>

<script>

    window.onload = function(){

        OG.VERBOSE = true;

        Smila.Settings({
            verbose:true
        });

        Smila.Renderer.start();

        var dataStore = Smila.DataStore;
        var renderer = Smila.Renderer;

        dataStore.putMap({
            src:"res/test_map_02.json",
            key:"map01",
            imgFolder:"res/"
        }, function(){
            var map = dataStore.getMap("map01");
            renderer.setMap(map);


            OG.Grid.createFromSmilaMap(map,function(grid){

                var a = grid.spawnEntity({
                    w : 2,
                    h : 2,
                    x : 5,
                    y : 5
                });

                var b = grid.spawnEntity({
                   x:5,
                    y:8
                });

                a.move(OG.Directions.n);

                //b.move(OG.Directions.n).move(OG.Directions.s);



                grid.block(0,0).print(true);

                for(var i = 0; i < a.traps.length;i++){
                    console.log(a.traps[i]);
                }

                for(var i = 0; i < b.traps.length;i++){
                    console.log(b.traps[i]);
                }

                var list = grid.query(4,2,1,1);
                for(var i = 0; i < list.length; i++){
                    console.log(list[i]);
                }


            });




        });



    };


</script>

</html>